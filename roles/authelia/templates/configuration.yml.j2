server:
  host: 0.0.0.0
  port: {{authelia_port}}
  path: ""
  buffers:
    read: 4096
    write: 4096
  enable_pprof: false
  enable_expvars: false
  disable_healthcheck: false
  asset_path: /config/assets/

log:
  level: info

access_control:
  default_policy: two_factor
  networks:
  - name: internal
    networks:
    - 192.168.1.0/24
  rules:
  - domain: "*.{{project_tld}}"
    policy: bypass
    resources:
    - "^/api/.*$"
    - "^/identity/.*$"
    - "^/triggers/.*$"
    - "^/meshagents.*$"
    - "^/meshsettings.*$"
    - "^/agent.*$"
    - "^/control.*$"
    - "^/meshrelay.*$"
    - "^/github-webhook/.*$"
  - domain: api.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Authelia_Admins"
  - domain: "ci.{{project_tld}}"
    policy: bypass
    networks:
    - internal
  - domain: cyberchef.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Authelia_Admins"
  - domain: sonarr.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: sonarr2.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: radarr.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: lidarr.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: readarr.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: prowlarr.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: sabnzbd.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: qbittorrent.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: bazarr.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: print.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"
  - domain: sabnzbd.{{project_tld}}
    policy: two_factor
    subject:
    - "group:Media_Users"

authentication_backend:
  password_reset:
    disable: false
  ldap:
    url: {{authelia_ldap_url}}
    base_dn: {{authelia_ldap_base_dn}}
    username_attribute: uid
    additional_users_dn: ou=users
    users_filter: (&({username_attribute}={input})(objectClass=person))
    additional_groups_dn: ou=groups
    groups_filter: (&(member={dn})(objectclass=groupOfNames))
    group_name_attribute: cn
    mail_attribute: mail
    display_name_attribute: displayname
    user: {{authelia_ldap_user}}
    password: {{authelia_ldap_password}}

storage:
  encryption_key: {{authelia_encryption_key}}
  postgres:
    host: {{postgres_hostname}}
    port: {{postgres_port}}
    database: {{authelia_database}}
    username: {{authelia_database_user}}
    password: {{authelia_database_password}}

session:
  domain: {{project_tld}}
  secret: {{authelia_session_secret}}
  redis:
    host: {{redis_hostname}}
    port: {{redis_port}}
    password: {{redis_password}}
    database_index: 1
    maximum_active_connections: 8
    minimum_idle_connections: 0
    high_availability:
      sentinel_name: {{redis_sentinel_name}}
      # If `sentinel_username` is supplied, Authelia will connect using ACL-based
      # authentication. Otherwise, it will use traditional `requirepass` auth.
      sentinel_password: {{redis_password}}
      nodes:
        - host: {{redis_sentinel_node1}}
          port: {{redis_sentinel_port}}
        - host: {{redis_sentinel_node2}}
          port: {{redis_sentinel_port}}
        - host: {{redis_sentinel_node3}}
          port: {{redis_sentinel_port}}
      route_by_latency: false
      route_randomly: false 

notifier:
  disable_startup_check: false
  smtp:
    host: {{email_host}}
    port: {{email_port}}
    timeout: 5s
    username: {{email_user}}
    password: {{email_password}}
    sender: "{{authelia_notifier_sender}}"
    subject: "[Authelia] {title}"
    startup_check_address: {{authelia_notifier_startup_check_address}}
    disable_require_tls: false
    disable_html_emails: false

regulation:
  max_retries: 3
  find_time: 2m
  ban_time: 5m

ntp:
  address: "time.cloudflare.com:123"
  version: 3
  max_desync: 3s
  disable_startup_check: false
  disable_failure: false

totp:
  issuer: H2OHome
  algorithm: sha1
  digits: 6
  period: 30
  skew: 1

duo_api:
  hostname: {{authelia_duo_hostname}}
  integration_key: {{authelia_duo_integration_key}}
  secret_key: {{authelia_duo_secret_key}}

theme: dark
jwt_secret: {{authelia_jwt_secret}}
default_redirection_url: https://www.{{project_tld}}/